<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plotting interactions among categorical variables in regression models • jtools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">jtools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/categorical.html">Plotting interactions among categorical variables in regression models</a>
    </li>
    <li>
      <a href="../articles/interactions.html">Exploring interactions with continuous predictors in regression models</a>
    </li>
    <li>
      <a href="../articles/summ.html">Tools for summarizing and visualizing regression models</a>
    </li>
    <li>
      <a href="../articles/svycor.html">Calculate correlations and correlation tables with complex survey data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jacob-long/jtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Plotting interactions among categorical variables in regression models</h1>
                        <h4 class="author">Jacob Long</h4>
            
            <h4 class="date">2017-11-10</h4>
          </div>

    
    
<div class="contents">
<p>When trying to understand interactions between categorical predictors, the types of visualizations called for tend to differ from those for continuous predictors. For that (and some other) reasons, <code>jtools</code> offers support for these in <code>cat_plot</code> while continuous predictors (perhaps in interactions with categorical predictors) are dealt with in <code>interact_plot</code>, which has a separate vignette.</p>
<p>To be clear…</p>
<p>If all the predictors involved in the interaction are categorical, use <code>cat_plot</code>. You can also use <code>cat_plot</code> to explore the effect of a single categorical predictor.</p>
<p>If one or more are continuous, use <code>interact_plot</code>.</p>
<div id="simple-two-way-interaction" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-two-way-interaction" class="anchor"></a>Simple two-way interaction</h2>
<p>First, let’s prep some data. I’m going to make some slight changes to the <code>mpg</code> dataset from <code>ggplot2</code> for didactic purposes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
mpg2 &lt;-<span class="st"> </span>mpg
mpg2<span class="op">$</span>cyl &lt;-<span class="st"> </span><span class="kw">factor</span>(mpg2<span class="op">$</span>cyl)
mpg2<span class="op">$</span>auto &lt;-<span class="st"> "auto"</span>
mpg2<span class="op">$</span>auto[mpg2<span class="op">$</span>trans <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"manual(m5)"</span>, <span class="st">"manual(m6)"</span>)] &lt;-<span class="st"> "manual"</span>
mpg2<span class="op">$</span>auto &lt;-<span class="st"> </span><span class="kw">factor</span>(mpg2<span class="op">$</span>auto)
mpg2<span class="op">$</span>fwd &lt;-<span class="st"> "2wd"</span>
mpg2<span class="op">$</span>fwd[mpg2<span class="op">$</span>drv <span class="op">==</span><span class="st"> "4"</span>] &lt;-<span class="st"> "4wd"</span>
mpg2<span class="op">$</span>fwd &lt;-<span class="st"> </span><span class="kw">factor</span>(mpg2<span class="op">$</span>fwd)
## Drop the two cars with 5 cylinders (rest are 4, 6, or 8)
mpg2 &lt;-<span class="st"> </span>mpg2[mpg2<span class="op">$</span>cyl <span class="op">!=</span><span class="st"> "5"</span>,]
## Fit the model
fit3 &lt;-<span class="st"> </span><span class="kw">lm</span>(cty <span class="op">~</span><span class="st"> </span>cyl <span class="op">*</span><span class="st"> </span>fwd <span class="op">*</span><span class="st"> </span>auto, <span class="dt">data =</span> mpg2)</code></pre></div>
<p>So basically what we’re looking at here is an interaction between number of cylinders in the engine of some cars and whether the car has all-wheel drive or two-wheel drive. The DV is fuel mileage in the city.</p>
<p>Let’s see what happens using all the default arguments:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<p>This is with <code>geom = "dot"</code>. We can see a main effect of <code>cyl</code> and maybe something is going on with the interaction as well, since the different between <code>2wd</code> and <code>4wd</code> seems to decrease as <code>cyl</code> gets higher.</p>
<p>You can also plot the observed data on the plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">plot.points =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
</div>
<div id="line-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#line-plots" class="anchor"></a>Line plots</h2>
<p>And since <code>cyl</code> does have a clear order, it might make more sense to connect those dots. Let’s try <code>geom = "line"</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"line"</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<p>Okay, that makes the trend quite a bit clearer.</p>
<p>You have some other options, too. Suppose you will need this plot to look good in black and white. Let’s change the shape of those points for different values of the moderator.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"line"</span>, <span class="dt">point.shape =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>You can change the line patterns as well for more clarity.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"line"</span>, <span class="dt">point.shape =</span> <span class="ot">TRUE</span>,
         <span class="dt">vary.lty =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
<p>You may also choose any color palette from <code>RColorBrewer</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"line"</span>, <span class="dt">point.shape =</span> <span class="ot">TRUE</span>,
         <span class="dt">color.class =</span> <span class="st">"Set1"</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
</div>
<div id="bardynamite-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#bardynamite-plots" class="anchor"></a>Bar/dynamite plots</h2>
<p>Last but not least, you can also make bar charts, AKA dynamite plots. For many situations, these are not the best way to show your data, but I know it’s what a lot of people are looking for.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"bar"</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>The transparency of the fill color depends on the presence of the error bars and observed data points.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"bar"</span>, <span class="dt">interval =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>Now let’s look with observed data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/cat_plot.html">cat_plot</a></span>(fit3, <span class="dt">pred =</span> cyl, <span class="dt">modx =</span> fwd, <span class="dt">geom =</span> <span class="st">"bar"</span>, <span class="dt">interval =</span> <span class="ot">FALSE</span>,
         <span class="dt">plot.points =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#simple-two-way-interaction">Simple two-way interaction</a></li>
      <li><a href="#line-plots">Line plots</a></li>
      <li><a href="#bardynamite-plots">Bar/dynamite plots</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
