<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot interaction effects between categorical predictors. — cat_plot • jtools</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">jtools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/categorical.html">Plotting interactions among categorical variables in regression models</a>
    </li>
    <li>
      <a href="../articles/interactions.html">Exploring interactions with continuous predictors in regression models</a>
    </li>
    <li>
      <a href="../articles/summ.html">Tools for summarizing and visualizing regression models</a>
    </li>
    <li>
      <a href="../articles/svycor.html">Calculate correlations and correlation tables with complex survey data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jacob-long/jtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot interaction effects between categorical predictors.</h1>
    </div>

    
    <p>`cat_plot` is a complementary function to [interact_plot()] that is designed
for plotting interactions when both predictor and moderator(s) are
categorical (or, in R terms, factors).</p>
    

    <pre class="usage"><span class='fu'>cat_plot</span>(<span class='no'>model</span>, <span class='no'>pred</span>, <span class='kw'>modx</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>mod2</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>geom</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"dot"</span>, <span class='st'>"line"</span>,
  <span class='st'>"bar"</span>, <span class='st'>"boxplot"</span>), <span class='kw'>interval</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot.points</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>point.shape</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>vary.lty</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>centered</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>int.type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"confidence"</span>, <span class='st'>"prediction"</span>), <span class='kw'>int.width</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>outcome.scale</span> <span class='kw'>=</span> <span class='st'>"response"</span>, <span class='kw'>set.offset</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x.label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>y.label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>main.title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>legend.main</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>color.class</span> <span class='kw'>=</span> <span class='st'>"Set2"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A regression model of type <code>lm</code>, <code>glm</code>,
<code><a href='http://www.rdocumentation.org/packages/survey/topics/svyglm'>svyglm</a></code>, or <code><a href='http://www.rdocumentation.org/packages/lme4/topics/merMod-class'>merMod</a></code>. It should
contain the interaction of interest. Models from other classes may work as
well but are not officially supported.</p></td>
    </tr>
    <tr>
      <th>pred</th>
      <td><p>A categorical predictor variable that will appear on the x-axis.</p></td>
    </tr>
    <tr>
      <th>modx</th>
      <td><p>A categorical moderator variable.</p></td>
    </tr>
    <tr>
      <th>mod2</th>
      <td><p>For three-way interactions, the second categorical moderator.</p></td>
    </tr>
    <tr>
      <th>geom</th>
      <td><p>What type of plot should this be? There are several options
  here since the best way to visualize categorical interactions varies by
  context. Here are the options:</p>
<p>* `"dot"`: The default. Simply plot the point estimates. You may want to
     use
    `point.shape = TRUE` with this and you should also consider
    `interval = TRUE` to visualize uncertainty.</p>
<p>* `"line"`: This connects observations across levels of the `pred`
    variable with a line. This is a good option when the `pred` variable
    is ordinal (ordered). You may still consider `point.shape = TRUE` and
    `interval = TRUE` is still a good idea.</p>
<p>* `"bar"`: A bar chart. Some call this a "dynamite plot."
    Many applied researchers advise against this type of plot because it
    does not represent the distribution of the observed data or the
    uncertainty of the predictions very well. It is best to at least use the
    `interval = TRUE` argument with this geom.</p>
<p>* `"boxplot"`: This geom plots a dot and whisker plot. These can be useful
    for understanding the distribution of the observed data without having
    to plot all the observed points (especially helpful with larger data
    sets). **However**, it is important to note the boxplots are not based
    on the model whatsoever.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>Logical. If <code>TRUE</code>, plots confidence/prediction
intervals. Not supported for <code>merMod</code> models.</p></td>
    </tr>
    <tr>
      <th>plot.points</th>
      <td><p>Logical. If <code>TRUE</code>, plots the actual data points as a
scatterplot on top of the interaction lines. Note that if
`geom = "bar"`, this will cause the bars to become transparent so you can
see the points.</p></td>
    </tr>
    <tr>
      <th>point.shape</th>
      <td><p>For plotted points---either of observed data or predicted
values with the "point" or "line" geoms---should the shape of the points
vary by the values of the factor? This is especially useful if you aim to
be black and white printing- or colorblind-friendly.</p></td>
    </tr>
    <tr>
      <th>vary.lty</th>
      <td><p>Should the resulting plot have different shapes for each
line in addition to colors? Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>centered</th>
      <td><p>A vector of quoted variable names that are to be
mean-centered. If <code>NULL</code>, all non-focal predictors are centered. If
not <code>NULL</code>, only the user-specified predictors are centered. User can
also use "none" or "all" arguments. The response variable is not centered
unless specified directly.</p></td>
    </tr>
    <tr>
      <th>int.type</th>
      <td><p>Type of interval to plot. Options are "confidence" or
"prediction". Default is confidence interval.</p></td>
    </tr>
    <tr>
      <th>int.width</th>
      <td><p>How large should the interval be, relative to the standard
error? The default, .95, corresponds to roughly 1.96 standard errors and
a .05 alpha level for values outside the range. In other words, for a
confidence interval, .95 is analogous to a 95% confidence interval.</p></td>
    </tr>
    <tr>
      <th>outcome.scale</th>
      <td><p>For nonlinear models (i.e., GLMs), should the outcome
variable be plotted on the link scale (e.g., log odds for logit models) or
the original scale (e.g., predicted probabilities for logit models)? The
default is <code>"response"</code>, which is the original scale. For the link
scale, which will show straight lines rather than curves, use
<code>"link"</code>.</p></td>
    </tr>
    <tr>
      <th>set.offset</th>
      <td><p>For models with an offset (e.g., Poisson models), sets a
offset for the predicted values. All predicted values will have the same
offset. By default, this is set to 1, which makes the predicted values a
proportion. See details for more about offset support.</p></td>
    </tr>
    <tr>
      <th>x.label</th>
      <td><p>A character object specifying the desired x-axis label. If
<code>NULL</code>, the variable name is used.</p></td>
    </tr>
    <tr>
      <th>y.label</th>
      <td><p>A character object specifying the desired x-axis label. If
<code>NULL</code>, the variable name is used.</p></td>
    </tr>
    <tr>
      <th>main.title</th>
      <td><p>A character object that will be used as an overall title
for the plot. If <code>NULL</code>, no main title is used.</p></td>
    </tr>
    <tr>
      <th>legend.main</th>
      <td><p>A character object that will be used as the title that
appears above the legend. If <code>NULL</code>, the name of the moderating
variable is used.</p></td>
    </tr>
    <tr>
      <th>color.class</th>
      <td><p>Any palette argument accepted by
<code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/scale_brewer'>scale_colour_brewer</a></code>. Default is "Set2" for factor
 moderators.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The functions returns a <code>ggplot</code> object, which can be treated
  like a user-created plot and expanded upon as such.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function provides a means for plotting conditional effects
  for the purpose of exploring interactions in the context of regression.
  You must have the
  package <code>ggplot2</code> installed to benefit from these plotting functions.</p>
<p>The function is designed for two and three-way interactions. For
  additional terms, the
  <code><a href='http://www.rdocumentation.org/packages/effects/topics/effects-package'>effects</a></code> package may be better suited to the task.</p>
<p>This function supports nonlinear and generalized linear models and by
  default will plot them on
  their original scale (<code>outcome.scale = "response"</code>).</p>
<p>While mixed effects models from <code>lme4</code> are supported, only the fixed
  effects are plotted. <code>lme4</code> does not provide confidence intervals,
  so they are not supported with this function either.</p>
<p>Note: to use transformed predictors, e.g., <code>log(variable)</code>,
  put its name in quotes or backticks in the argument.</p>
<p><em>Info about offsets:</em></p>
<p>Offsets are partially supported by this function with important
  limitations. First of all, only a single offset per model is supported.
  Second, it is best in general to specify offsets with the offset argument
  of the model fitting function rather than in the formula. If it is
  specified in the formula with a svyglm, this function will stop with an
  error message.</p>
<p>It is also advised not to do any transformations to the offset other than
  the common log transformation. If you apply a log transform, this function
  will deal with it sensibly. So if your offset is a logged count, the
  exposure you set will be the non-logged version, which is much easeir to
  wrap one's head around. For any other transformation you may apply, or
  if you apply no transformation at all, the exposures used will be the
  post-tranformation number (which is by default 1).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>price</span> ~ <span class='no'>cut</span> * <span class='no'>color</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>diamonds</span>)
<span class='fu'>cat_plot</span>(<span class='no'>fit</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='no'>color</span>, <span class='kw'>modx</span> <span class='kw'>=</span> <span class='no'>cut</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='img'><img src='cat_plot-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
<span class='co'># 3-way interaction</span>

<span class='co'>## Will first create a couple dichotomous factors to ensure full rank</span>
<span class='no'>mpg2</span> <span class='kw'>&lt;-</span> <span class='no'>mpg</span>
<span class='no'>mpg2</span>$<span class='no'>auto</span> <span class='kw'>&lt;-</span> <span class='st'>"auto"</span>
<span class='no'>mpg2</span>$<span class='no'>auto</span>[<span class='no'>mpg2</span>$<span class='no'>trans</span> <span class='kw'>%in%</span> <span class='fu'>c</span>(<span class='st'>"manual(m5)"</span>, <span class='st'>"manual(m6)"</span>)] <span class='kw'>&lt;-</span> <span class='st'>"manual"</span>
<span class='no'>mpg2</span>$<span class='no'>fwd</span> <span class='kw'>&lt;-</span> <span class='st'>"2wd"</span>
<span class='no'>mpg2</span>$<span class='no'>fwd</span>[<span class='no'>mpg2</span>$<span class='no'>drv</span> <span class='kw'>==</span> <span class='st'>"4"</span>] <span class='kw'>&lt;-</span> <span class='st'>"4wd"</span>
<span class='co'>## Drop the two cars with 5 cylinders (rest are 4, 6, or 8)</span>
<span class='no'>mpg2</span> <span class='kw'>&lt;-</span> <span class='no'>mpg2</span>[<span class='no'>mpg2</span>$<span class='no'>cyl</span> <span class='kw'>!=</span> <span class='st'>"5"</span>,]
<span class='co'>## Fit the model</span>
<span class='no'>fit3</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>cty</span> ~ <span class='no'>cyl</span> * <span class='no'>fwd</span> * <span class='no'>auto</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mpg2</span>)

<span class='co'># The line geom looks good for an ordered factor predictor</span>
<span class='fu'>cat_plot</span>(<span class='no'>fit3</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='no'>cyl</span>, <span class='kw'>modx</span> <span class='kw'>=</span> <span class='no'>fwd</span>, <span class='kw'>mod2</span> <span class='kw'>=</span> <span class='no'>auto</span>, <span class='kw'>geom</span> <span class='kw'>=</span> <span class='st'>"line"</span>,
 <span class='kw'>interval</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='img'><img src='cat_plot-2.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
